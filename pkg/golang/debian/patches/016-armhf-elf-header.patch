Description: Use correct ELF header for armhf binaries.
Author: Adam Conrad <adconrad@ubuntu.com>
Last-Update: 2013-07-08

Index: golang-1.3/src/cmd/ld/elf.c
===================================================================
--- golang-1.3.orig/src/cmd/ld/elf.c	2014-06-19 01:26:27.000000000 +0100
+++ golang-1.3/src/cmd/ld/elf.c	2014-06-23 22:04:49.040724543 +0100
@@ -57,7 +57,11 @@
 	case '5':
 		// we use EABI on both linux/arm and freebsd/arm.
 		if(HEADTYPE == Hlinux || HEADTYPE == Hfreebsd)
-			hdr.flags = 0x5000002; // has entry point, Version5 EABI
+#ifdef __ARM_PCS_VFP
+			hdr.flags = 0x5000402; // has entry point, Version5 EABI, hard-float ABI
+#else
+			hdr.flags = 0x5000202; // has entry point, Version5 EABI, soft-float ABI
+#endif
 		// fallthrough
 	default:
 		hdr.phoff = ELF32HDRSIZE;	/* Must be be ELF32HDRSIZE: first PHdr must follow ELF header */
